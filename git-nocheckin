echo This script adds a pre-commit hook to the .git/hooks folder of the current directory that prevents committing if the string 'nocheckin' is found anywhere. There are many ways one can do this, but we go for maximum simplicity: the file is just '! grep -Frin "nocheckin" .'
echo \(Fixed-string, recursive, insensitive-to-case, numbered-with-file-lines-in-output\)
echo Amusingly, this means you cannot mention nocheckin anywhere in the repo, including in commit messages, and in the git hooks themselves! So we use some quotation trickery to hide the word from itself.

if [ -e .git/hooks/pre-commit ] && [ "$1" != "-f" ] ; then
  echo "ERROR: .git/hooks/pre-commit already exists, and I wouldn't want to overwrite it. Pass -f to overwrite it."
  exit 1
else
  echo '! grep -Frin "no""checkin" .' >.git/hooks/pre-commit
  chmod +x .git/hooks/pre-commit
fi